'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var createHistory = function createHistory() {
  var history = {};
  var listeners = [];

  history.listen = function () {
    return null;
  };
  history.push = function () {
    return null;
  };

  if (typeof document !== 'undefined') {
    (function () {
      var handlePopState = function handlePopState(e) {
        return listeners.forEach(function (l) {
          return l(window.location);
        });
      };

      history = window.history;

      history.listen = function (listener) {
        if (typeof listener !== 'function') return;

        listeners.push(listener);
        return function () {
          return listeners = listener.filter(function (item) {
            return item !== listener;
          });
        };
      };

      history.push = function (pathname) {
        history.pushState({}, null, pathname);
        handlePopState();
      };

      window.addEventListener('popstate', handlePopState);
    })();
  }

  return history;
};

exports.default = createHistory;